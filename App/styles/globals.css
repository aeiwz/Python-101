/* =========================================================
   Cosmic Glass UI â€” Dark/Light v3 (Next.js + Bootstrap)
   ========================================================= */

/* ---------- Base tokens (Dark as default) ---------- */

:root {
  /* Brand */
  --brand: #2d8cff;
  --brand-2: #6ea5ff;
  --brand-3: #8ad6ff;

  /* Dark palette (default if no data-theme) */
  --bg-grad: radial-gradient(1200px 800px at 80% -10%, rgba(45,140,255,.18), transparent 60%),
             radial-gradient(1000px 600px at -10% 20%, rgba(138,214,255,.12), transparent 60%),
             linear-gradient(180deg, #0a0f1f, #0b1220);
  --bg: #0b1220;        /* document backdrop */
  --surface: #10182c;   /* card bg */
  --surface-2: #0f1629; /* deeper surface */
  --surface-hover: #17223b;
  --text: #e6ebff;
  --text-2: #b8c2e6;
  --muted: #8b94b3;

  --accent: #3b82f6; /* button/link primary */
  --ok: #19c37d;
  --warn: #ffd166;
  --danger: #ff5c7a;

  --border: rgba(138,214,255,.18);
  --ring: rgba(68,170,255,.55);
  --dot-1: rgba(127,127,127,0.07);
  --dot-2: rgba(127,127,127,0.05);

  --r-xs: .35rem;
  --r-sm: .6rem;
  --r-md: .9rem;
  --r-lg: 1.1rem;
  --r-xl: 1.6rem;

  --shadow-1: 0 8px 28px rgba(0,0,0,.28);
  --shadow-2: 0 18px 60px rgba(0,0,0,.35);

  --glow-soft: 0 0 0 1px rgba(138,214,255,.14), 0 10px 30px rgba(0,0,0,.25);
  --glow-soft-hover: 0 0 0 1px rgba(138,214,255,.24), 0 16px 40px rgba(0,0,0,.35);

  --t: .22s cubic-bezier(.2,.8,.2,1);
}

/* ---------- Light palette when explicitly selected ---------- */
:root[data-theme="light"] {
  --bg-grad: radial-gradient(900px 600px at 90% -10%, rgba(37,99,235,.08), transparent 60%),
             radial-gradient(1000px 600px at -10% 20%, rgba(99,102,241,.07), transparent 60%),
             linear-gradient(180deg, #f6f9ff, #eef2f7);
  --bg: #f4f7ff;
  --surface: #ffffffd9;
  --surface-2: #fff;
  --surface-hover: #f2f5fb;
  --text: #12182a;
  --text-2: #47557d;
  --muted: #65739c;

  --accent: #2563eb;
  --border: rgba(34,122,255,.14);
  --ring: rgba(34,122,255,.40);
  --dot-1: rgba(8, 13, 32, 0.06);
  --dot-2: rgba(14, 25, 47, 0.03);

  --glow-soft: 0 0 0 1px rgba(34,122,255,.12), 0 12px 24px rgba(0,0,0,.08);
  --glow-soft-hover: 0 0 0 1px rgba(34,122,255,.22), 0 18px 36px rgba(0,0,0,.12);
}

/* ---------- System mode: respect OS if no explicit data-theme ---------- */
@media (prefers-color-scheme: light) {
  :root:not([data-theme="dark"]):not([data-theme="light"]) {
    --bg-grad: radial-gradient(900px 600px at 90% -10%, rgba(37,99,235,.08), transparent 60%),
               radial-gradient(1000px 600px at -10% 20%, rgba(99,102,241,.07), transparent 60%),
               linear-gradient(180deg, #f6f9ff, #eef2f7);
    --bg: #f4f7ff;
    --surface: #ffffffd9;
    --surface-2: #fff;
    --surface-hover: #f2f5fb;
    --text: #12182a;
    --text-2: #47557d;
    --muted: #65739c;
    --accent: #2563eb;
    --border: rgba(34,122,255,.14);
    --ring: rgba(34,122,255,.40);
    --dot-1: rgba(11, 29, 53, 0.06);
    --dot-2: rgba(0,0,0,0.03);
    --glow-soft: 0 0 0 1px rgba(34,122,255,.12), 0 12px 24px rgba(0,0,0,.08);
    --glow-soft-hover: 0 0 0 1px rgba(34,122,255,.22), 0 18px 36px rgba(0,0,0,.12);
  }
}

/* ---------- Global base & smooth transitions ---------- */
html, body {
  background: var(--bg-grad);
  color: var(--text);
}
*,
*::before,
*::after {
  transition: background-color .25s ease, color .25s ease, border-color .25s ease, box-shadow .25s ease;
}

.container, .container-fluid { color: var(--text); }
.text-secondary { color: var(--text-2) !important; }
small, .small { color: var(--muted) !important; }
h1, .h1, h2, .h2, h3, .h3 { letter-spacing: .2px; }

/* ---------- Dotted background helper ---------- */
.bg-grid, .bg-surface, .card.bg-surface {
  background-image:
    radial-gradient(transparent 1px, var(--dot-1) 1px),
    radial-gradient(transparent 1px, var(--dot-2) 1px);
  background-size: 24px 24px, 48px 48px;
  background-position: 0 0, 12px 12px;
}
.bg-surface, .card.bg-surface {
  border-radius: var(--r-xl);
  background-color: color-mix(in srgb, var(--surface) 88%, transparent);
  backdrop-filter: saturate(120%) blur(8px);
}

/* ---------- Navbar ---------- */
.navbar {
  background: linear-gradient(180deg, color-mix(in srgb, var(--surface) 85%, transparent), transparent);
  border-color: var(--border) !important;
  backdrop-filter: blur(6px);
  border-radius: var(--r-lg);
}

/* ---------- Cards / Tiles ---------- */
.card {
  background: linear-gradient(180deg,
    color-mix(in srgb, var(--surface) 92%, transparent),
    color-mix(in srgb, var(--surface-2) 96%, transparent));
  border: 1px solid var(--border);
  border-radius: var(--r-lg);
  box-shadow: var(--glow-soft);
  transition: transform var(--t), box-shadow var(--t), border-color var(--t), background var(--t);
}
.card:hover {
  transform: translateY(-4px);
  box-shadow: var(--glow-soft-hover);
  border-color: color-mix(in srgb, var(--border) 65%, var(--brand) 35%);
}
.card .card-title { display: flex; align-items: center; gap: .5rem; }

/* ---------- Buttons ---------- */
.btn, a.btn {
  border-radius: var(--r-sm);
  transition: transform var(--t), box-shadow var(--t), background-color var(--t), border-color var(--t), color var(--t);
  will-change: transform, box-shadow;
}
.btn:active { transform: translateY(1px) scale(.99); }

.btn-primary {
  background: linear-gradient(180deg, var(--accent), color-mix(in srgb, var(--accent) 82%, #1f6fe0 18%));
  border: 1px solid color-mix(in srgb, var(--accent) 80%, #0a3e9d 20%);
  color: #fff;
  box-shadow: 0 6px 20px rgba(45,140,255,.28);
}
.btn-primary:hover {
  filter: brightness(1.05);
  box-shadow: 0 10px 28px rgba(45,140,255,.35);
}

.btn-outline-secondary {
  color: var(--text-2);
  border: 1px solid var(--border);
  background: transparent;
}
.btn-outline-secondary:hover {
  color: var(--text);
  border-color: color-mix(in srgb, var(--border) 70%, var(--brand) 30%);
  background: linear-gradient(180deg, color-mix(in srgb, var(--surface) 40%, transparent), transparent);
}

.btn-warning {
  color: #1b243b;
  border: 1px solid #e3b341;
  background: linear-gradient(180deg, #ffd166, #f5b94b);
  box-shadow: 0 8px 24px rgba(255,209,102,.35);
}
.btn-warning:hover { filter: brightness(1.05); }

/* ---------- Form controls ---------- */
.form-control, textarea.form-control, .form-select {
  color: var(--text);
  background: linear-gradient(180deg,
    color-mix(in srgb, var(--surface) 90%, transparent),
    color-mix(in srgb, var(--surface-2) 96%, transparent));
  border: 1px solid var(--border);
  border-radius: var(--r-sm);
  box-shadow: inset 0 1px 0 rgba(255,255,255,.02);
}
.form-control:focus, .form-select:focus {
  border-color: var(--ring);
  box-shadow: 0 0 0 3px color-mix(in srgb, var(--ring) 40%, transparent);
  outline: none;
}

/* ---------- Editor / Console ---------- */
.editor {
  min-height: 220px;
  font-family: ui-monospace, Menlo, Consolas, "SF Mono", monospace;
  line-height: 1.45;
}
.console {
  height: 260px;
  overflow: auto;
  white-space: pre-wrap;
  background: linear-gradient(180deg,
    color-mix(in srgb, var(--surface) 92%, transparent),
    color-mix(in srgb, var(--surface-2) 96%, transparent));
  border: 1px solid var(--border);
  border-radius: var(--r-sm);
}

/* ---------- Alerts ---------- */
.alert {
  border-radius: var(--r-md);
  border: 1px solid var(--border);
  background: linear-gradient(180deg,
    color-mix(in srgb, var(--surface) 88%, transparent),
    color-mix(in srgb, var(--surface-2) 94%, transparent));
  color: var(--text-2);
}

/* ---------- Modal ---------- */
.modal-content {
  border-radius: var(--r-xl);
  background: linear-gradient(180deg,
    color-mix(in srgb, var(--surface) 92%, transparent),
    color-mix(in srgb, var(--surface-2) 98%, transparent));
  border: 1px solid var(--border);
  box-shadow: var(--shadow-2);
}
.modal-header, .modal-footer { border-color: color-mix(in srgb, var(--border) 50%, transparent); }
.modal-backdrop.show {
  backdrop-filter: blur(10px) saturate(120%);
  background-color: rgba(10,16,30,.55);
}
.modal.d-block { overflow-y: auto; }

/* ---------- Brand headline ---------- */
.brand-grad {
  background: linear-gradient(90deg, var(--brand) 0%, var(--brand-2) 50%, var(--brand-3) 100%);
  -webkit-background-clip: text;
  background-clip: text;
  color: transparent !important;
  text-shadow: 0 0 24px rgba(138,214,255,.25);
}

/* ---------- Fancy tiles ---------- */
.glow-tile {
  border: 1px solid var(--border);
  box-shadow: var(--glow-soft);
  border-radius: var(--r-lg);
  transition: transform var(--t), box-shadow var(--t), border-color var(--t);
}
.glow-tile:hover {
  transform: translateY(-4px);
  box-shadow: var(--glow-soft-hover);
}

/* ---------- Subtle separators ---------- */
.border-bottom { border-color: color-mix(in srgb, var(--border) 70%, transparent) !important; }

/* ---------- Footer ---------- */
.footer { background: transparent; }
.footer .container { color: var(--text-2); }

/* ---------- Utility helpers ---------- */
.rounded-xl { border-radius: var(--r-xl) !important; }
.neon-ring { box-shadow: 0 0 0 3px color-mix(in srgb, var(--ring) 40%, transparent); }
.text-brand { color: var(--brand) !important; }
.badge-soft {
  display: inline-block; padding: .25rem .5rem; border-radius: 99px;
  border: 1px solid var(--border);
  background: linear-gradient(180deg, color-mix(in srgb, var(--surface) 70%, transparent), transparent);
  color: var(--text-2);
}

/* ---------- Theme toggle chip ---------- */
.theme-toggle {
  display: inline-flex; gap: 4px; padding: 4px; border-radius: 999px;
  border: 1px solid var(--border);
  background: linear-gradient(180deg,
    color-mix(in srgb, var(--surface) 86%, transparent),
    color-mix(in srgb, var(--surface-2) 92%, transparent));
  align-items: center;
}
.theme-toggle button {
  border: 0; background: transparent; color: var(--text-2);
  border-radius: 999px; padding: 6px 10px; cursor: pointer;
}
.theme-toggle button[aria-pressed="true"] {
  color: var(--text);
  background: linear-gradient(180deg, color-mix(in srgb, var(--surface) 60%, transparent), transparent);
  box-shadow: 0 0 0 1px var(--border), 0 6px 18px rgba(0,0,0,.15);
}

/* ---------- Focus visible (keyboard a11y) ---------- */
:focus-visible {
  outline: 2px solid var(--ring);
  outline-offset: 2px;
  border-radius: var(--r-xs);
}

/* ---------- Micro animation ---------- */
@keyframes floaty { from {transform:translateY(0)} 50%{transform:translateY(-2px)} to {transform:translateY(0)} }
.floaty { animation: floaty 4s ease-in-out infinite; }


/* Defaults (dark) */
:root {
  --bg-grad: radial-gradient(1200px 800px at 80% -10%, rgba(45,140,255,.18), transparent 60%),
             radial-gradient(1000px 600px at -10% 20%, rgba(138,214,255,.12), transparent 60%),
             linear-gradient(180deg, #0a0f1f, #0b1220);
  --text: #e6ebff;

  --dot-1: rgba(127,127,127,0.07);
  --dot-2: rgba(127,127,127,0.05);
  --surface: #10182c;
  --surface-border: rgba(138,214,255,.18);
}

/* Light variant */
:root[data-theme="light"] {
  --bg-grad: radial-gradient(900px 600px at 90% -10%, rgba(37,99,235,.08), transparent 60%),
             radial-gradient(1000px 600px at -10% 20%, rgba(99,102,241,.07), transparent 60%),
             linear-gradient(180deg, #f6f9ff, #eef2f7);
  --text: #12182a;

  --dot-1: rgba(0,0,0,0.06);
  --dot-2: rgba(0,0,0,0.03);
  --surface: #ffffffd9;
  --surface-border: rgba(34,122,255,.14);
}

/* Apply to the page background (this is what was missing) */
html, body {
  min-height: 100%;
  background: var(--bg-grad);
  color: var(--text);
  transition: background .25s ease, color .25s ease;
}

/* Dotted glass surfaces use the theme vars */
.bg-grid {
  background-image:
    radial-gradient(transparent 1px, var(--dot-1) 1px),
    radial-gradient(transparent 1px, var(--dot-2) 1px);
  background-size: 24px 24px, 48px 48px;
  background-position: 0 0, 12px 12px;
}

.bg-surface, .card.bg-surface {
  background-color: var(--surface);
  border: 1px solid var(--surface-border);
  border-radius: 1rem;
  backdrop-filter: blur(8px) saturate(120%);
  transition: background-color .25s ease, border-color .25s ease;
}